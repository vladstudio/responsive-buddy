$(document).on("submit","form",function(){$(this).find(".button.primary").addClass("loading-spinner disabled")}),$(document).on("submit","form[ajax-post]",async function(e){e.preventDefault();let t=$(this),o=t;t.attr("ajax-target")&&(o=$(t.attr("ajax-target"))),$("#"+t.attr("id")).children(".primary").addClass("loading-spinner disabled");let a=new FormData(t.get(0)),n=await fetch(t.attr("ajax-post"),{method:"post",body:a,cache:"no-cache"});if(n.headers.get("Redirect"))return window.location=n.headers.get("Redirect"),!1;let s=await n.text();if(t.attr("ajax-filter")){let e=$(s).find(t.attr("ajax-filter"));e.length&&(s=e)}o.replaceWith(s);let i=$(".error");return i.length&&i[0].scrollIntoView({behavior:"smooth",block:"center"}),$(".primary").removeClass("loading-spinner disabled"),!1}),$(document).on("click","*[ajax-get]",async function(e){e.preventDefault();let t=$(this);t.attr("ajax-loader")&&$(t.attr("ajax-loader")).addClass("loading-spinner disabled");let o=t.attr("ajax-target")?$(t.attr("ajax-target")):t,n=await fetch(t.attr("ajax-get"));if(n.headers.get("Redirect"))return window.location=n.headers.get("Redirect"),!1;let s=await n.text();if(t.attr("ajax-filter")){let e=$(s).find(t.attr("ajax-filter"));e.length&&(s=e)}return o.replaceWith(s),!1}),sq_modal_open=async function(e,t){t&&t.preventDefault(),$(".modal").remove();let n="";if(e.slice(0,1)=="#")n=$(e).html();else{const t=await fetch(e);n=await t.text()}return $("body").addClass("modal-is-open").append('<div class="modal"><div class="modal-underlay"></div><div class="modal-content"><div class="loading-spinner p-4"></div></div></div>'),$(".modal-content .loading-spinner").replaceWith(n),$(".primary.loading-spinner").removeClass("loading-spinner disabled"),!1},$(document).on("click",".modal-underlay, .modal-close",function(){if($(".modal").length)return $(".modal").remove(),$("body").removeClass("modal-is-open"),!1}),$(document).on("click",".modal-open",async function(e){return sq_modal_open($(this).attr("href"),e)}),$(document).on("click","ul.tree li.toggle > a",function(){return $(this).parent().toggleClass("expanded"),!1}),$("body").on("click",'div.singular a[class*="selected"]',function(){return $(this).siblings(".only-ml").removeClass("only-ml"),$(this).siblings(".only-l").removeClass("only-l"),$(this).children(".i-caret-down").remove(),$("body").off("click","div.singular a.selected"),!1})